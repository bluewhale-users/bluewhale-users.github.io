<!DOCTYPE html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Tutorial12 - Bluewhale Tutorial Site</title>
<meta name="description" content="put your description">
<meta name="generator" content="Hugo 0.94.0" />
<link href="https://bluewhale-users.github.io//index.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://bluewhale-users.github.io/okd/cicd/tutorial12/">
<link rel="stylesheet" href="https://bluewhale-users.github.io/css/theme.min.css">
<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="https://bluewhale-users.github.io/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script>
<script src="https://bluewhale-users.github.io/js/bundle.js"></script><style>
:root {}
</style>
<meta property="og:title" content="Tutorial12" />
<meta property="og:description" content="Private Repository 연동 1. SSH 키 생성 - Git Bash 실행 - 사용자 폴더로 이동후 .ssh 폴더 생성 및 이동 - ssh-keygen 실행 ssh-keygen 사용시 기본값(SHA-1)은 github에서 더 이상 인증 용도로 사용할" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bluewhale-users.github.io/okd/cicd/tutorial12/" /><meta property="og:image" content="https://bluewhale-users.github.io/images/og-image.png"/><meta property="article:section" content="okd" />
<meta property="article:published_time" content="2022-03-15T11:33:14+09:00" />
<meta property="article:modified_time" content="2022-03-15T11:33:14+09:00" /><meta property="og:site_name" content="Hugo Techdoc Theme" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://bluewhale-users.github.io/images/og-image.png"/>

<meta name="twitter:title" content="Tutorial12"/>
<meta name="twitter:description" content="Private Repository 연동 1. SSH 키 생성 - Git Bash 실행 - 사용자 폴더로 이동후 .ssh 폴더 생성 및 이동 - ssh-keygen 실행 ssh-keygen 사용시 기본값(SHA-1)은 github에서 더 이상 인증 용도로 사용할"/>
<meta itemprop="name" content="Tutorial12">
<meta itemprop="description" content="Private Repository 연동 1. SSH 키 생성 - Git Bash 실행 - 사용자 폴더로 이동후 .ssh 폴더 생성 및 이동 - ssh-keygen 실행 ssh-keygen 사용시 기본값(SHA-1)은 github에서 더 이상 인증 용도로 사용할"><meta itemprop="datePublished" content="2022-03-15T11:33:14+09:00" />
<meta itemprop="dateModified" content="2022-03-15T11:33:14+09:00" />
<meta itemprop="wordCount" content="911"><meta itemprop="image" content="https://bluewhale-users.github.io/images/og-image.png"/>
<meta itemprop="keywords" content="" /></head>
<body><div class="container"><header>
<h1>Bluewhale Tutorial Site</h1><span class="version">Version 0.9.7</span><a href="https://github.com/thingsym/hugo-theme-techdoc" class="github"><i class="fab fa-github"></i></a>
<p class="description">put your description</p>

</header>
<div class="global-menu">
<nav>
<ul>
<li><a href="/">Home</a></li>
<li><a href="http://hnc-dev-center-intro.s3-website.ap-northeast-2.amazonaws.com/">개발자센터</a></li><li class="parent active"><a href="">Tutorials<i class="fas fa-angle-right"></i></a>
<ul class="sub-menu">
<li class="child active"><a href="/okd/cicd/">CI/CD</a></li>
</ul>
</li></ul>
</nav>
</div>
<div class="content-container">
<main><h1>Tutorial12</h1>
<h1 id="private-repository-연동">Private Repository 연동</h1>
<h2 id="1-ssh-키-생성">1. SSH 키 생성</h2>
<pre tabindex="0"><code>- Git Bash 실행
- 사용자 폴더로 이동후 .ssh 폴더 생성 및 이동
- ssh-keygen 실행
</code></pre><h2 id="ssh-keygen-사용시-기본값sha-1은-github에서-더-이상-인증-용도로-사용할-수-없다">ssh-keygen 사용시 기본값(SHA-1)은 github에서 더 이상 인증 용도로 사용할 수 없다.</h2>
<p>Update : 2022-01-11<br>
November 16, 2021	The ECDSA and Ed25519 host keys will start to be fully usable. GitHub’s DSA host key will no longer be supported.</p>
<pre tabindex="0"><code>Unable to connect SSH repository: unknown error: ERROR: You&#39;re using an RSA key with SHA-1, which is no longer allowed. Please use a newer client or a different key type.
</code></pre><pre tabindex="0"><code>https://github.blog/2021-09-01-improving-git-protocol-security-github/

- Removing support for all DSA keys
- Adding requirements for newly added RSA keys
- Removing some legacy SSH algorithms (HMAC-SHA-1 and CBC ciphers)
- Adding ECDSA and Ed25519 host keys for SSH
Turning off the unencrypted Git protocol

github 지원 타입
&#39;ssh-rsa&#39;, &#39;ecdsa-sha2-nistp256&#39;, &#39;ecdsa-sha2-nistp384&#39;, &#39;ecdsa-sha2-nistp521&#39;, &#39;ssh-ed25519&#39;, &#39;sk-ecdsa-sha2-nistp256@openssh.com&#39;, &#39;sk-ssh-ed25519@openssh.com&#39;.  

아래 타입으로 생성
ssh-keygen -t ecdsa-sha2-nistp521
</code></pre><pre tabindex="0"><code>$ ssh-keygen -t ecdsa-sha2-nistp521
Generating public/private ecdsa-sha2-nistp521 key pair.
Enter file in which to save the key (/c/Users/owner/.ssh/id_ecdsa): blackwhale-testuser-nistp521-id
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in blackwhale-testuser-nistp521-id.
Your public key has been saved in blackwhale-testuser-nistp521-id.pub.
The key fingerprint is:
SHA256:XwWVH/MoeDVvW6UGGUru6gGnPMoHv7bRU+cvKNs68BY owner@DESKTOP-2M4EABD
The key&#39;s randomart image is:
+---[ECDSA 521]---+
|          . o+.. |
|         o .o.+o.|
|          o. o.*=|
|         .. o.+ *|
|      . S o.oo .o|
|    ...=E+ +   . |
|     o=o=....    |
|   . .++=+. ..   |
|    ooo++=.  ..  |
+----[SHA256]-----+
</code></pre><p><figure><img src="/cicd/tutorial12_1.jpg"/>
</figure>

<figure><img src="/cicd/tutorial12_2.jpg"/>
</figure>
</p>
<h2 id="2-github-private-repository-설정">2. Github Private Repository 설정</h2>
<h3 id="user-profile에서-settings-이동">User profile에서 Settings 이동</h3>
<figure><img src="/cicd/tutorial12_3.jpg"/>
</figure>

<h3 id="ssh-and-gpg-keys-설정으로-이동">SSH and GPG Keys 설정으로 이동</h3>
<figure><img src="/cicd/tutorial12_4.jpg"/>
</figure>

<h3 id="new-ssh-key-선택후-생성한-testuser_idpub-파일을-메모장으로-열어-모두-복사후-붙여넣기">New SSH key 선택후 생성한 testuser_id.pub 파일을 메모장으로 열어 모두 복사후 붙여넣기</h3>
<figure><img src="/cicd/tutorial12_5.jpg"/>
</figure>

<h2 id="3-repository-clone-방법">3. Repository Clone 방법</h2>
<ul>
<li>
<p>&ldquo;사용자 폴더&rdquo;/.ssh/config 파일을 만든다.
<figure><img src="/cicd/tutorial12_6.jpg"/>
</figure>
</p>
</li>
<li>
<p>생성한 키를 아래 형식으로 추가한다.</p>
</li>
</ul>
<pre tabindex="0"><code>Host testuser_github
        Hostname github.com
    User git
        IdentityFile=C:\Users\owner\.ssh\testuser_id
</code></pre><ul>
<li>git clone</li>
</ul>
<pre tabindex="0"><code>git clone testuser_github:blackwhale-testuser/privatetutorial.git
</code></pre><p>[output]</p>
<pre tabindex="0"><code>C:\Work2021\spcsenti2023&gt;git
clone testuser_github:blackwhale-testuser/privatetutorial.git
Cloning into &#39;privatetutorial&#39;...
remote: Enumerating objects: 3, done.
remote: Counting objects: 100% (3/3), done.
remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
Receiving objects: 100% (3/3), done.
</code></pre><h2 id="jenkins-private-repository-설정-방법">Jenkins Private Repository 설정 방법</h2>
<ul>
<li>Deploy Key 생성</li>
</ul>
<pre tabindex="0"><code>SSH 키 생성
Git Bash 실행
사용자 폴더로 이동후 .ssh 폴더 생성 및 이동
ssh-keygen 실행
</code></pre><h3 id="ssh-key-생성">ssh key 생성</h3>
<p><figure><img src="/cicd/tutorial12_8.jpg"/>
</figure>

<figure><img src="/cicd/tutorial12_9.jpg"/>
</figure>
</p>
<h3 id="github-private-repository로-이동하여-settings의-deploy-keys를-선택한다">GitHub private repository로 이동하여, Settings의 Deploy Keys를 선택한다.</h3>
<figure><img src="/cicd/tutorial12_10.jpg"/>
</figure>

<h3 id="생성한-public-key를-메모장으로-열어-모두-복사후-붙여-넣는다">생성한 Public Key를 메모장으로 열어 모두 복사후 붙여 넣는다.</h3>
<figure><img src="/cicd/tutorial12_11.jpg"/>
</figure>

<h2 id="jenkins-설정">Jenkins 설정</h2>
<pre tabindex="0"><code>- Jenkins →  Jenkins 관리 → Manage Credentials 이동
- (global) 도메인 선택
</code></pre><figure><img src="/cicd/tutorial12_12.jpg"/>
</figure>

<pre tabindex="0"><code>Add Credentials 선택
Kind를 SSH Username with private key 선택
ID와 Username을 입력
Privte Key에서 Enter directly를 선택후 Add를 눌러 생성한 Private Key를 메모장으로 열어 모두 복사후 붙여넣는다. 
</code></pre><figure><img src="/cicd/tutorial12_13.jpg"/>
</figure>

<pre tabindex="0"><code>파이프라인 생성과정은 동일
GitHub Repository에서 SSH Clone 주소를 확인한다. 
git@github.com:blackwhale-testuser/privatetutorial.git
</code></pre><figure><img src="/cicd/tutorial12_14.jpg"/>
</figure>

<pre tabindex="0"><code>Pipeline 설정에서 Repository URL을 위에서 확인한 주소로 넣는다. 
Credentials에서 본인이 생성한 Credential을 선택한다. 
</code></pre><figure><img src="/cicd/tutorial12_15.jpg"/>
</figure>

<h2 id="argocd-private-repository-설정-방법">ArgoCD Private Repository 설정 방법</h2>
<h3 id="argocd-이동후-settings--repositories-이동">ArgoCD 이동후 Settings → Repositories 이동</h3>
<figure><img src="/cicd/tutorial12_16.jpg"/>
</figure>

<pre tabindex="0"><code>- CONNECT REPO USING SSH 선택
- 로컬에서 생성한 Private Key를 메모장으로 열어 모두 복사후 SSH private key data에 붙여 넣는다. 
- Skip server verification 체크
- Enable LFS support(Git only) 체크
- Connect를 누른다. 
- Connection Status가 Successful인지 확인
</code></pre><figure><img src="/cicd/tutorial12_17.jpg"/>
</figure>

<pre tabindex="0"><code>GitHub Private repository SSH 주소를 확인한다. 
git@github.com:blackwhale-testuser/privatetutorial.git
</code></pre><figure><img src="/cicd/tutorial12_18.jpg"/>
</figure>

<pre tabindex="0"><code>App 생성시 Source의 Repository URL에 ssh 주소를 입력한다. 
</code></pre><figure><img src="/cicd/tutorial12_19.jpg"/>
</figure>

<div class="edit-meta">
Last updated on 15 Mar 2022


<br>
Published on 15 Mar 2022
<br><a href="https://github.com/thingsym/hugo-theme-techdoc/edit/master/okd%5ccicd%5ctutorial12.md" class="edit-page"><i class="fas fa-pen-square"></i>&nbsp;Edit on GitHub</a></div><nav class="pagination"><a class="nav nav-prev" href="https://bluewhale-users.github.io/okd/cicd/tutorial11/" title="Tutorial11"><i class="fas fa-arrow-left" aria-hidden="true"></i>&nbsp;Prev - Tutorial11</a>
<a class="nav nav-next" href="https://bluewhale-users.github.io/okd/cicd/tutorial13/" title="Tutorial13">Next - Tutorial13 <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://themes.gohugo.io/hugo-theme-techdoc/">TechDoc</a>. Designed by <a href="https://github.com/thingsym/hugo-theme-techdoc">Thingsym</a>.</p>
</footer>
</main>
<div class="sidebar">

<nav class="slide-menu">
<ul>
<li class=""><a href="https://bluewhale-users.github.io/">Home</a></li>

<li class="parent has-sub-menu"><a href="https://bluewhale-users.github.io/okd/">okd<span class="mark opened">-</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://bluewhale-users.github.io/okd/tutorial1/">Tutorial1</a></li>

<li class="parent has-sub-menu"><a href="https://bluewhale-users.github.io/okd/cicd/">CI/CD<span class="mark opened">-</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://bluewhale-users.github.io/okd/cicd/tutorial1/">Tutorial1</a></li>
<li class=""><a href="https://bluewhale-users.github.io/okd/cicd/tutorial2/">Tutorial2</a></li>
<li class=""><a href="https://bluewhale-users.github.io/okd/cicd/tutorial3/">Tutorial3</a></li>
<li class=""><a href="https://bluewhale-users.github.io/okd/cicd/tutorial4/">Tutorial4</a></li>
<li class=""><a href="https://bluewhale-users.github.io/okd/cicd/tutorial5/">Tutorial5</a></li>
<li class=""><a href="https://bluewhale-users.github.io/okd/cicd/tutorial6/">Tutorial6</a></li>
<li class=""><a href="https://bluewhale-users.github.io/okd/cicd/tutorial7/">Tutorial7</a></li>
<li class=""><a href="https://bluewhale-users.github.io/okd/cicd/tutorial8/">Tutorial8</a></li>
<li class=""><a href="https://bluewhale-users.github.io/okd/cicd/tutorial9/">Tutorial9</a></li>
<li class=""><a href="https://bluewhale-users.github.io/okd/cicd/tutorial10/">Tutorial10</a></li>
<li class=""><a href="https://bluewhale-users.github.io/okd/cicd/tutorial11/">Tutorial11</a></li>
<li class="active"><a href="https://bluewhale-users.github.io/okd/cicd/tutorial12/">Tutorial12</a></li>
<li class=""><a href="https://bluewhale-users.github.io/okd/cicd/tutorial13/">Tutorial13</a></li>
</ul>
  
</li>
</ul>
  
</li>


</ul>
</nav>



<div class="sidebar-footer"></div>
</div>

</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
